<!-- Volunteer Profile Modal -->
<div class="modal fade" id="volunteerProfileModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Volunteer Profile</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="volunteer-profile">
          <header class="volunteer-profile__header">
            <div>
              <h3 id="profileName" class="mb-1">Volunteer Name</h3>
              <div class="volunteer-profile__contact">
                <i class="bi bi-envelope"></i>
                <a href="#" id="profileEmailLink"><span id="profileEmail"></span></a>
              </div>
            </div>
            <div class="volunteer-profile__status">
              <span id="profileApprovalBadge" class="badge rounded-pill bg-secondary">Status</span>
              <span id="profileBlockedBadge" class="badge rounded-pill bg-danger d-none">Blocked</span>
            </div>
          </header>

          <div class="volunteer-profile__grid">
            <section>
              <h4>At a glance</h4>
              <ul class="volunteer-profile__list">
                <li><i class="bi bi-geo-alt"></i> <span id="profileLocation">—</span></li>
                <li><i class="bi bi-telephone"></i> <span id="profilePhone">—</span></li>
                <li><i class="bi bi-clock-history"></i> Joined <span id="profileJoined">—</span></li>
                <li><i class="bi bi-check2-circle"></i> Last assignment <span id="profileLastAssignment">—</span></li>
              </ul>
            </section>
            <section>
              <h4>Capability</h4>
              <div id="profileSkills" class="volunteer-profile__chips">No skills registered.</div>
              <p class="small text-muted mt-2 mb-0" id="profileNotes"></p>
            </section>
          </div>

          <section class="volunteer-profile__stats">
            <div><span class="label">Tasks Assigned</span><span class="value" id="profileTasksAssigned">0</span></div>
            <div><span class="label">Completed</span><span class="value text-success" id="profileTasksCompleted">0</span></div>
            <div><span class="label">Overdue</span><span class="value text-danger" id="profileTasksOverdue">0</span></div>
            <div><span class="label">Warned</span><span class="value text-warning" id="profileTasksWarned">0</span></div>
          </section>

          <section class="volunteer-profile__tasks">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h4 class="mb-0">Active Tasks</h4>
              <button class="btn btn-link btn-sm p-0" id="openFullTaskHistory">
                View full history <i class="bi bi-box-arrow-up-right"></i>
              </button>
            </div>
            <div id="profileActiveTasks" class="volunteer-profile__tasks-list">
              <p class="text-muted small mb-0">No active tasks.</p>
            </div>
          </section>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-outline-primary" id="profileEmailVolunteer">
          <i class="bi bi-envelope"></i> Email volunteer
        </button>
        <button type="button" class="btn btn-primary" id="profileAssignTask">
          <i class="bi bi-clipboard-plus"></i> Assign new task
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Other Modals (assign task, email, confirm action) -->
<div class="modal fade" id="assignTaskModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Assign New Task</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form id="assignTaskForm">
        <div class="modal-body">
          <input type="hidden" id="volunteerId">
          <div class="alert alert-light border mb-3">
            <div class="fw-semibold">Assigning to <span id="assignTaskVolunteerName">—</span></div>
            <div class="text-muted small" id="assignTaskVolunteerEmail">Select a volunteer to prefill their details.</div>
          </div>
          <div class="mb-3">
            <label for="taskTitle" class="form-label">Task Title <span class="text-danger">*</span></label>
            <input type="text" class="form-control" id="taskTitle" required>
          </div>
          <div class="mb-3">
            <label for="taskDescription" class="form-label">Description</label>
            <textarea class="form-control" id="taskDescription" rows="3"></textarea>
          </div>
          <div class="mb-3">
            <label for="taskDisaster" class="form-label">Linked Disaster</label>
            <select id="taskDisaster" class="form-select">
              <option value="">No disaster linkage</option>
            </select>
          </div>
          <div class="row">
            <div class="col-md-6">
              <label for="taskPriority" class="form-label">Priority</label>
              <select id="taskPriority" class="form-select">
                <option value="medium" selected>Medium</option>
                <option value="low">Low</option>
                <option value="high">High</option>
                <option value="critical">Critical</option>
              </select>
            </div>
            <div class="col-md-6">
              <label for="taskDeadline" class="form-label">Deadline</label>
              <input type="date" class="form-control" id="taskDeadline">
            </div>
          </div>
          <div class="mt-3">
            <label for="relatedRequest" class="form-label">Related Request ID</label>
            <input type="text" class="form-control" id="relatedRequest" placeholder="Optional request reference">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary">Assign Task</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="emailVolunteerModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Send Email</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form id="emailVolunteerForm">
        <div class="modal-body">
          <input type="hidden" id="emailVolunteerId">
          <div class="mb-2">
            <span class="text-muted small">To: <span id="emailVolunteerTo"></span></span>
          </div>
          <div class="mb-3">
            <label class="form-label">Subject <span class="text-danger">*</span></label>
            <input type="text" class="form-control" id="emailSubject" required />
          </div>
          <div class="mb-3">
            <label class="form-label">Message <span class="text-danger">*</span></label>
            <textarea class="form-control" id="emailMessage" rows="5" required></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary">Send Email</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="confirmActionModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="confirmActionTitle">Confirm Action</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="confirmActionMessage">
        Are you sure you want to continue?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" id="confirmActionBtn">Confirm</button>
      </div>
    </div>
  </div>
</div>

<!-- Task History Modal -->
<div class="modal fade" id="taskHistoryModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="taskHistoryTitle">Task history</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div id="taskHistoryContent" class="list-group list-group-flush">
          <div class="text-center text-muted py-4">No task history loaded yet.</div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
